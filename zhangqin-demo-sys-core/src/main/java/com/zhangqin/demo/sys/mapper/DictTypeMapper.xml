<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhangqin.demo.sys.mapper.DictTypeMapper">

	<resultMap type="com.zhangqin.demo.sys.entity.DictType" id="resultMap">
		<result column="id" property="id" />
		<result column="tenant_id" property="tenantId" />
		<result column="parent_id" property="parentId" />
		<result column="type_code" property="typeCode" />
		<result column="sort" property="sort" />
		<result column="remark" property="remark" />
		<result column="is_system" property="system" />
		<result column="create_user_id" property="createUserId" />
		<result column="create_time" property="createTime" />
		<result column="update_user_id" property="updateUserId" />
		<result column="update_time" property="updateTime" />
		<result column="is_deleted" property="deleted" />
	</resultMap>

	<select id="listByQo" parameterType="com.zhangqin.demo.sys.qo.DictTypeQO" resultMap="resultMap">
		SELECT
			id,
			tenant_id,
			parent_id,
			type_code,
			type_name,
			sort,
			remark,
			is_system,
			create_user_id,
			create_time,
			update_user_id,
			update_time,
			is_deleted
		FROM
			sys_dict_type
		WHERE
			is_deleted = 0
			<if test="null != rules">
				<foreach collection="rules" item="item">
					<choose>
						<when test="item.rule.value == 'EQ'">
							AND type_code = #{${item.field}}
						</when>
						<when test="item.rule.value == 'LK_R'">
							AND type_code LIKE CONCAT(#{${item.field}},'%')
						</when>
					</choose>
				</foreach>
			</if>
	</select>
	
</mapper>
